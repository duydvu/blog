---
title: "Giá»›i thiá»‡u vá» Data Version Control dÃ¹ng cho cÃ¡c dá»± Ã¡n AI/ML"
date: 2023-10-16 21:00:00
excerpt: á»¨ng dá»¥ng DVC giÃºp cho viá»‡c quáº£n lÃ½ dá»¯ liá»‡u vÃ  mÃ´ hÃ¬nh trá»Ÿ nÃªn dá»… dÃ ng vÃ  hiá»‡u quáº£ hÆ¡n, nháº¥t lÃ  nhá»¯ng dá»± Ã¡n cÃ³ quy mÃ´ lá»›n vÃ  nhiá»u ngÆ°á»i tham gia.
index_img: /images/brandon-morgan-3qucB7U2l7I-unsplash-small.jpg
banner_img: /images/brandon-morgan-3qucB7U2l7I-unsplash-medium.jpg
tags:
- Data Science
- Data Version Control
- Tool
- Machine Learning
- Artificial Intelligence
---

Má»™t trong nhá»¯ng váº¥n Ä‘á» quan trá»ng nháº¥t trong cÃ¡c dá»± Ã¡n AI/ML lÃ  quáº£n lÃ½ dá»¯ liá»‡u vÃ  mÃ´ hÃ¬nh. CÃ¡c dá»± Ã¡n AI/ML thÆ°á»ng cÃ³ nhiá»u ngÆ°á»i tham gia vÃ  thÆ°á»ng xuyÃªn pháº£i thay Ä‘á»•i. Nhá»¯ng thay Ä‘á»•i cÃ³ thá»ƒ lÃ  thay Ä‘á»•i vá» dá»¯ liá»‡u, vá» kiáº¿n trÃºc mÃ´ hÃ¬nh, thay Ä‘á»•i tham sá»‘, thay Ä‘á»•i cÃ¡ch thá»©c huáº¥n luyá»‡n, thay Ä‘á»•i cÃ¡ch thá»©c Ä‘Ã¡nh giÃ¡ mÃ´ hÃ¬nh, thay Ä‘á»•i cÃ¡ch thá»©c triá»ƒn khai mÃ´ hÃ¬nh, v.v...

Náº¿u chÃºng ta khÃ´ng quáº£n lÃ½ dá»¯ liá»‡u vÃ  mÃ´ hÃ¬nh má»™t cÃ¡ch hiá»‡u quáº£ thÃ¬ sáº½ dá»… dáº«n Ä‘áº¿n nhiá»u tÃ¬nh huá»‘ng khÃ´ng mong muá»‘n. VÃ­ dá»¥ nhÆ°:
- TÃ¬nh huá»‘ng 1:
  - Báº¡n train má»™t mÃ´ hÃ¬nh vá»›i má»™t táº­p dá»¯ liá»‡u.
  - Báº¡n chá»‰nh sá»­a táº­p dá»¯ liá»‡u vÃ  train láº¡i mÃ´ hÃ¬nh nhÆ°ng khÃ´ng lÆ°u láº¡i phiÃªn báº£n cÅ©.
  - Khi Ä‘Ã¡nh giÃ¡ mÃ´ hÃ¬nh, báº¡n nháº­n tháº¥y mÃ´ hÃ¬nh má»›i khÃ´ng tá»‘t báº±ng mÃ´ hÃ¬nh cÅ©.
  - Báº¡n muá»‘n quay láº¡i phiÃªn báº£n táº­p dá»¯ liá»‡u cÅ© Ä‘á»ƒ tÃ¬m ra nguyÃªn nhÃ¢n nhÆ°ng khÃ´ng thá»ƒ vÃ¬ báº¡n Ä‘Ã£ xÃ³a nÃ³ Ä‘i rá»“i ğŸ˜°
  - Táº¥t nhiÃªn lÃ  viá»‡c lÆ°u 1 báº£n backup má»—i khi chá»‰nh sá»­a táº­p dá»¯ liá»‡u sáº½ giÃºp trÃ¡nh Ä‘Æ°á»£c tÃ¬nh huá»‘ng nÃ y. NhÆ°ng khi sá»‘ láº§n chá»‰nh sá»­a nhiá»u lÃªn khiáº¿n cho sá»‘ báº£n backup cÃ ng nhiá»u, báº¡n sáº½ ráº¥t khÃ³ quáº£n lÃ½ chÃºng.
- TÃ¬nh huá»‘ng 2: Báº¡n vá»«a Ä‘Æ°á»£c tham gia vÃ o 1 dá»± Ã¡n Ä‘ang trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn. Dá»± Ã¡n nÃ y trÆ°á»›c Ä‘Ã¢y Ä‘Æ°á»£c phá»¥ trÃ¡ch bá»Ÿi 1 anh Ä‘á»“ng nghiá»‡p trong team. Báº¡n nháº­n code & data tá»« áº£nh vá» vÃ  báº¯t Ä‘áº§u cÃ´ng viá»‡c.
  - Báº¡n: "Em Ä‘Ã£ thay Ä‘á»•i tham sá»‘ vÃ  train láº¡i model. Model má»›i cÃ³ Ä‘á»™ chÃ­nh xÃ¡c cao hÆ¡n model cÅ© mÃ  anh train cÃ¡ch Ä‘Ã¢y 3 thÃ¡ng."
  - Anh Ä‘á»“ng nghiá»‡p: "Tuyá»‡t vá»i! Äá»ƒ anh Ä‘Ã¡nh giÃ¡ model cá»§a em trÆ°á»›c khi deploy nÃ³ lÃªn prod nhÃ©."
  - Anh Ä‘á»“ng nghiá»‡p: "Hmmm... Model cá»§a em cÃ³ váº» khÃ´ng chÃ­nh xÃ¡c báº±ng model cá»§a anh. Model cá»§a em lÃ  96% trong khi cá»§a anh lÃ  98%."
  - Báº¡n: "Sao láº¡i tháº¿ áº¡? Trong report cá»§a anh vá» model Ä‘Æ°á»£c train 3 thÃ¡ng trÆ°á»›c thÃ¬ Ä‘á»™ chÃ­nh xÃ¡c chá»‰ lÃ  94% thÃ´i mÃ !"
  - Anh Ä‘á»“ng nghiá»‡p: "Láº¡ nhá»‰? Ã€ anh nhá»› rá»“i. TrÆ°á»›c khi em join project nÃ y cÃ¡ch Ä‘Ã¢y 1 tuáº§n thÃ¬ anh cÃ³ lÃ m sáº¡ch táº­p test nÃªn khiáº¿n cho model chÃ­nh xÃ¡c hÆ¡n. ChÆ°a ká»‹p update report thÃ¬ em Ä‘Ã£ train láº¡i rá»“i. ğŸ˜…"
  - Báº¡n: "..."
  
á» Ä‘Ã¢y, viá»‡c khÃ´ng tracking thay Ä‘á»•i cá»§a táº­p dá»¯ liá»‡u khiáº¿n cho báº¡n khÃ´ng biáº¿t Ä‘Æ°á»£c ráº±ng model trÆ°á»›c Ä‘Ã¢y Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡ trÃªn táº­p dá»¯ liá»‡u nhÆ° tháº¿ nÃ o.

TrÆ°á»›c Ä‘Ã¢y, mÃ¬nh Ä‘Ã£ tá»«ng Ä‘áº·t tÃªn cho cÃ¡c táº­p dá»¯ liá»‡u vÃ  mÃ´ hÃ¬nh vá»›i nhá»¯ng cÃ¡i tÃªn nhÆ°: model_v1, model_v2, model_new, data_raw, data_cleaned, data_preprocessed, v.v... Rá»“i 1 thá»i gian sau, mÃ¬nh láº¡i quÃªn mÃ¬nh Ä‘Ã£ lÃ m gÃ¬ vá»›i nhá»¯ng táº­p dá»¯ liá»‡u vÃ  mÃ´ hÃ¬nh nÃ y. model_v1 train báº±ng táº­p dá»¯ liá»‡u nÃ o? learning rate lÃ  bao nhiÃªu? Rá»“i cáº£ tá»· cÃ¢u há»i khÃ¡c mÃ  bÃ¢y giá» chá»‰ cÃ³ cÃ¡ch lÃ  dÃ¹ng mÃ¡y du hÃ nh thá»i gian cá»§a Doraemon má»›i cÃ³ thá»ƒ tráº£ lá»i Ä‘Æ°á»£c ğŸ˜‚.

Qua nhá»¯ng vÃ­ dá»¥ trÃªn, cháº¯c háº³n báº¡n Ä‘Ã£ pháº§n nÃ o hÃ¬nh dung Ä‘Æ°á»£c táº§m quan trá»ng cá»§a viá»‡c quáº£n lÃ½ dá»¯ liá»‡u vÃ  mÃ´ hÃ¬nh trong cÃ¡c dá»± Ã¡n AI/ML.

Äá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y, cÃ³ ráº¥t nhiá»u cÃ´ng cá»¥ Ä‘Æ°á»£c phÃ¡t triá»ƒn nhÆ°ng trong bÃ i viáº¿t nÃ y, mÃ¬nh sáº½ giá»›i thiá»‡u vá» [Data Version Control (DVC)](https://dvc.org/).

# Data Version Control lÃ  gÃ¬?

Data Version Control (DVC) lÃ  má»™t cÃ´ng cá»¥ mÃ£ nguá»“n má»Ÿ dÃ¹ng Ä‘á»ƒ quáº£n lÃ½ phiÃªn báº£n cho dá»¯ liá»‡u vÃ  mÃ´ hÃ¬nh. Trong phÃ¡t triá»ƒn pháº§n má»m thÃ´ng thÆ°á»ng, chÃºng ta Ä‘Ã£ quÃ¡ quen thuá»™c vá»›i viá»‡c sá»­ dá»¥ng Git Ä‘á»ƒ quáº£n lÃ½ phiÃªn báº£n cho code. Tuy nhiÃªn, Git khÃ´ng phÃ¹ há»£p Ä‘á»ƒ quáº£n lÃ½ phiÃªn báº£n cho dá»¯ liá»‡u vÃ  mÃ´ hÃ¬nh. DVC ra Ä‘á»i Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y.

DVC Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ hoáº¡t Ä‘á»™ng dá»±a trÃªn Git. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  trong cÃ¹ng 1 repo, báº¡n vá»«a cÃ³ thá»ƒ dÃ¹ng Git Ä‘á»ƒ quáº£n lÃ½ code, vá»«a cÃ³ thá»ƒ dÃ¹ng DVC Ä‘á»ƒ quáº£n lÃ½ dá»¯ liá»‡u vÃ  mÃ´ hÃ¬nh.

Nhá» hoáº¡t Ä‘á»™ng dá»±a trÃªn Git, DVC táº­n dá»¥ng Ä‘Æ°á»£c cÃ¡c tÃ­nh nÄƒng máº¡nh máº½ cá»§a Git nhÆ°: branch, tag. Báº¡n cÃ³ thá»ƒ táº¡o nhiá»u branch, má»—i branch chá»©a 1 táº­p dá»¯ liá»‡u khÃ¡c nhau. Báº¡n cÃ³ thá»ƒ táº¡o tag má»—i khi train xong 1 mÃ´ hÃ¬nh.

![Nguá»“n: dvc.org](dvc.png)

# Báº¯t Ä‘áº§u sá»­ dá»¥ng DVC

Báº¡n cÃ³ thá»ƒ báº¯t Ä‘áº§u sá»­ dá»¥ng DVC ngay bÃ¢y giá» báº±ng viá»‡c cÃ i Ä‘áº·t theo hÆ°á»›ng dáº«n á»Ÿ link sau: [https://dvc.org/doc/install](https://dvc.org/doc/install).

Hoáº·c náº¿u báº¡n dÃ¹ng pip, báº¡n cÃ³ thá»ƒ cÃ i Ä‘áº·t DVC báº±ng lá»‡nh sau:

```bash
pip install dvc
```

Sau khi cÃ i Ä‘áº·t, trong thÆ° má»¥c chá»©a project repo cá»§a báº¡n, tiáº¿n hÃ nh khá»Ÿi táº¡o project DVC báº±ng lá»‡nh:

```bash
dvc init
```

# LÃ m quen vá»›i quáº£n lÃ½ phiÃªn báº£n dá»¯ liá»‡u

Khi sá»­ dá»¥ng Git vá»›i code, thÃ´ng thÆ°á»ng báº¡n sáº½ thay Ä‘á»•i code trong file rá»“i commit file Ä‘Ã³ vÃ o index cá»§a Git. CÃ¡ch nÃ y phÃ¹ há»£p vá»›i code vÃ¬ cÃ¡c file code thÆ°á»ng cÃ³ kÃ­ch thÆ°á»›c ráº¥t nhá» vÃ  dá»… theo dÃµi nhá»¯ng thay Ä‘á»•i vá» ná»™i dung cá»§a chÃºng.

KhÃ¡c vá»›i code, dá»¯ liá»‡u thÆ°á»ng cÃ³ kÃ­ch thÆ°á»›c lá»›n vÃ  thay Ä‘á»•i ráº¥t nhiá»u. Náº¿u commit file dá»¯ liá»‡u vÃ o repo, nÃ³ sáº½ trá»Ÿ nÃªn ráº¥t náº·ng. Báº¡n cÅ©ng khÃ´ng thá»ƒ biáº¿t Ä‘Æ°á»£c ráº±ng file dá»¯ liá»‡u nÃ y Ä‘Ã£ Ä‘Æ°á»£c thay Ä‘á»•i nhÆ° tháº¿ nÃ o.

DVC tiáº¿p cáº­n váº¥n Ä‘á» nÃ y báº±ng cÃ¡ch sá»­ dá»¥ng 1 file meta Ä‘á»ƒ lÆ°u láº¡i thÃ´ng tin vá» file dá»¯ liá»‡u. File meta nÃ y cÃ³ kÃ­ch thÆ°á»›c nhá» vÃ  Ä‘Æ°á»£c lÆ°u trá»¯ trong repo cá»§a Git. Khi báº¡n thay Ä‘á»•i file dá»¯ liá»‡u, DVC sáº½ cáº­p nháº­t file meta nÃ y. Khi báº¡n muá»‘n láº¥y láº¡i file dá»¯ liá»‡u, DVC sáº½ dá»±a vÃ o file meta nÃ y Ä‘á»ƒ tÃ¬m ra file dá»¯ liá»‡u cáº§n láº¥y.

VÃ­ dá»¥, báº¡n cÃ³ 1 file CSV chá»©a dá»¯ liá»‡u training. Báº¡n muá»‘n lÆ°u file nÃ y vÃ o repo cá»§a Git. Báº¡n sáº½ lÃ m nhÆ° sau:

```bash
dvc add train.csv
```

Lá»‡nh nÃ y sáº½ táº¡o ra file `train.csv.dvc` chá»©a thÃ´ng tin meta cá»§a file dá»¯ liá»‡u. Ná»™i dung cá»§a nÃ³ cÃ³ cáº¥u trÃºc giá»‘ng nhÆ° tháº¿ nÃ y:
  
```yaml
outs:
- md5: 9da9c6d8d622f096132838c67e7685b6
  size: 298046
  hash: md5
  path: train.csv
```

Vá» cÆ¡ báº£n, lá»‡nh `dvc add` sáº½ tÃ­nh toÃ¡n ra giÃ¡ trá»‹ hash cá»§a file dá»¯ liá»‡u vÃ  lÆ°u vÃ o file `train.csv.dvc`. HÃ m hash sáº½ Ä‘áº£m báº£o ráº±ng náº¿u file dá»¯ liá»‡u thay Ä‘á»•i thÃ¬ giÃ¡ trá»‹ hash cÅ©ng sáº½ thay Ä‘á»•i.

Sau khi cÃ³ Ä‘Æ°á»£c file `train.csv.dvc`, báº¡n commit file nÃ y vÃ o repo cá»§a Git. File nÃ y Ä‘Ã³ng vai trÃ² nhÆ° lÃ  1 con trá», nÃ³ sáº½ trá» tá»›i file dá»¯ liá»‡u tháº­t. File dá»¯ liá»‡u tháº­t sáº½ Ä‘Æ°á»£c lÆ°u trá»¯ trong thÆ° má»¥c `.dvc/cache`.

```bash
git add train.csv.dvc
git commit -m "Add train.csv"
```

BÃ¢y giá», báº¡n thá»­ edit file `train.csv` vÃ  lÆ°u láº¡i. Sau Ä‘Ã³, báº¡n cháº¡y lá»‡nh sau:

```bash
dvc status
```

Lá»‡nh `dvc status` cÃ³ chá»©c nÄƒng giá»‘ng nhÆ° `git status` nhÆ°ng dÃ nh cho dá»¯ liá»‡u. Lá»‡nh nÃ y sáº½ kiá»ƒm tra xem file dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c thay Ä‘á»•i hay chÆ°a. Náº¿u file dá»¯ liá»‡u Ä‘Ã£ Ä‘Æ°á»£c thay Ä‘á»•i, lá»‡nh nÃ y sáº½ thÃ´ng bÃ¡o cho báº¡n biáº¿t:

```
train.csv.dvc:
        changed outs:
                modified:           train.csv
```

VÃ¬ file dá»¯ liá»‡u Ä‘Ã£ thay Ä‘á»•i, file `train.csv.dvc` khÃ´ng cÃ²n trá» Ä‘áº¿n Ä‘Ãºng file dá»¯ liá»‡u ná»¯a. Báº¡n cáº§n pháº£i update láº¡i file nÃ y báº±ng lá»‡nh:

```bash
dvc commit train.csv.dvc
```

DVC sáº½ há»i lÃ  báº¡n cÃ³ muá»‘n commit file nÃ y hay khÃ´ng. Nháº­p `y` vÃ  Enter Ä‘á»ƒ tiáº¿p tá»¥c.

LÃºc nÃ y, DVC sáº½ tÃ­nh toÃ¡n láº¡i giÃ¡ trá»‹ hash cá»§a file dá»¯ liá»‡u vÃ  cáº­p nháº­t láº¡i file `train.csv.dvc`. Sau Ä‘Ã³, báº¡n commit file vÃ o Git.

```bash
git add train.csv.dvc
git commit -m "Update train.csv"
```

Giáº£ sá»­ nhÆ° báº¡n muá»‘n láº¥y láº¡i file dá»¯ liá»‡u cÅ©. Báº¡n cÃ³ thá»ƒ lÃ m theo cÃ¡ch sau:

```bash
git checkout HEAD~1 -- train.csv.dvc
dvc checkout train.csv
```

Lá»‡nh `git checkout` sáº½ láº¥y láº¡i file `train.csv.dvc` tá»« commit trÆ°á»›c Ä‘Ã³. NhÆ° há»“i nÃ£y mÃ¬nh Ä‘Ã£ nÃ³i, file meta Ä‘Ã³ng vai trÃ² nhÆ° lÃ  1 con trá» Ä‘á»ƒ trá» tá»›i dá»¯ liá»‡u tháº­t. LÃºc nÃ y, file `train.csv.dvc` khÃ´ng cÃ²n trá» Ä‘áº¿n file `train.csv` trong thÆ° má»¥c chÃ­nh ná»¯a mÃ  Ä‘ang trá» tá»›i file cÅ© Ä‘ang náº±m trong `.dvc/cache`.

Khi tá»›i cÃ¢u lá»‡nh `dvc checkout`, DVC sáº½ dá»±a vÃ o file meta Ä‘á»ƒ tÃ¬m ra file dá»¯ liá»‡u tháº­t vÃ  Ä‘em file nÃ y vá» thÆ° má»¥c chÃ­nh. Tháº¿ lÃ  báº¡n Ä‘Ã£ láº¥y láº¡i Ä‘Æ°á»£c file dá»¯ liá»‡u cÅ© rá»“i!

Giá»‘ng nhÆ° Git, DVC cÅ©ng há»— trá»£ lÆ°u trá»¯ remote nhÆ°ng thay vÃ¬ lÃ  Github, Gitlab thÃ¬ ta cÃ³ S3, Google Cloud Storage, Google Drive, HDFS, v.v... NhÆ°ng mÃ¬nh sáº½ khÃ´ng Ä‘i sÃ¢u vÃ o pháº§n nÃ y, náº¿u muá»‘n thÃ¬ báº¡n cÃ³ thá»ƒ xem thÃªm táº¡i [https://dvc.org/doc/user-guide/data-management/remote-storage](https://dvc.org/doc/user-guide/data-management/remote-storage).

NhÆ° váº­y lÃ  mÃ¬nh Ä‘Ã£ cover Ä‘Æ°á»£c khÃ¡i niá»‡m cÆ¡ báº£n vá» quáº£n lÃ½ phiÃªn báº£n dá»¯ liá»‡u cá»§a DVC rá»“i Ä‘áº¥y. Äá»‘i vá»›i mÃ´ hÃ¬nh thÃ¬ vá» cÆ¡ báº£n nÃ³ cÅ©ng chá»‰ lÃ  1 hoáº·c nhiá»u file cÃ³ thá»ƒ Ä‘Æ°á»£c `dvc add` vÃ  track báº±ng file `.dvc` mÃ  thÃ´i.

Äá»£i Ä‘Ã£! NhÆ°ng chÃºng ta chÆ°a giáº£i quyáº¿t Ä‘Æ°á»£c bÃ i toÃ¡n lÃ m tháº¿ nÃ o Ä‘á»ƒ xÃ¡c Ä‘á»‹nh 1 mÃ´ hÃ¬nh Ä‘Æ°á»£c train báº±ng dá»¯ liá»‡u gÃ¬ vÃ  tham sá»‘ nhÆ° tháº¿ nÃ o mÃ , Ä‘Ãºng khÃ´ng???

Viá»‡c quáº£n lÃ½ phiÃªn báº£n dá»¯ liá»‡u chá»‰ lÃ  bÆ°á»›c khá»Ÿi Ä‘áº§u cho quáº£n lÃ½ phiÃªn báº£n mÃ´ hÃ¬nh. MÃ¬nh sáº½ Ä‘i sÃ¢u hÆ¡n vá» váº¥n Ä‘á» nÃ y trong bÃ i viáº¿t tiáº¿p theo. CÃ²n bÃ¢y giá» thÃ¬ táº¡m thá»i dá»«ng á»Ÿ Ä‘Ã¢y nhÃ© :v.

Happy Coding!
